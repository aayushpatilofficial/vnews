{% extends "base.html" %}
{% block content %}
<div class="hero-section">
    <h2>Welcome to V Network</h2>

    <div class="hero-cta social-icons">
        <!-- Facebook -->
        <a href="https://www.facebook.com/share/1G7jZPTuty/" target="_blank" aria-label="Facebook">
            <img src="https://imagizer.imageshack.com/img923/5426/zDhOyv.png" alt="Facebook" class="social-icon">
        </a>

        <!-- Instagram -->
        <a href="https://www.instagram.com/vnewsnetwork?igsh=aHg0bHF0ZDd2MjI4" target="_blank" aria-label="Instagram">
            <img src="https://imagizer.imageshack.com/img922/7529/SLiHjx.jpg" alt="Instagram" class="social-icon">
        </a>

        <!-- YouTube -->
        <a href="https://youtube.com/@vnetworkregd1826?si=-BqiRGiXHr0BiHKl" target="_blank" aria-label="YouTube">
            <img src="https://imagizer.imageshack.com/img924/8207/gVHkYb.png" alt="YouTube" class="social-icon">
        </a>
    </div>
</div>

<!-- ðŸŽ¯ Live YouTube Subscriber Counter -->
<div id="subscriber-box" style="padding: 20px; background: #fff; border-radius: 15px; box-shadow: 0 0 20px rgba(255,0,0,0.3); max-width: 300px; margin: 20px auto; text-align: center; font-family: Arial, sans-serif;">
    <img src="https://www.iconpacks.net/icons/2/free-youtube-logo-icon-2431-thumb.png" alt="YouTube" style="width: 40px; height: 40px; margin-bottom: 10px;">
    <div id="subscriber-count" style="font-size: 24px; font-weight: bold; color: #ff0000;">
        Subscribers: Loading...
    </div>
</div>

<script>
    const apiKey = "AIzaSyBUDWEQnr4jmRX00TYHwwibujDIy8LTdcc";
    const channelId = "UCgeFN61OQTU3GZKL6qLsKkg";

    async function fetchSubscriberCount() {
        try {
            const response = await fetch(
                `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channelId}&key=${apiKey}`
            );
            const data = await response.json();
            const count = data.items[0].statistics.subscriberCount;
            document.getElementById("subscriber-count").innerText = `Subscribers: ${count}`;
        } catch (error) {
            console.error("Failed to fetch subscriber count:", error);
            document.getElementById("subscriber-count").innerText = "Subscribers: Error";
        }
    }

    fetchSubscriberCount();
    setInterval(fetchSubscriberCount, 30000);
</script>

<!-- ðŸŽ¥ Video Grid Section -->
<div class="grid">
    {% for video in videos %}
    <div class="card">
        <div class="card-content">
            <h3>{{ video.title }}</h3>
            <iframe src="{{ video.url | replace('watch?v=', 'embed/') }}" allowfullscreen></iframe>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
